{"id":"genes-t6g","title":"genes-ts: Haxe → TypeScript compiler (Genes-based)","description":"Source of truth: HAXE_TO_TYPESCRIPT_COMPILER_PLAN.md\n\nGoal: Build a fully-featured Haxe→TypeScript compiler on Haxe 4.7 by extending Genes' JS-platform custom generator approach.\n\nKey defaults (locked):\n- TS is primary output (idiomatic TS code + project structure)\n- strict TS by default (configurable)\n- default runtime compatibility + opt-in minimal-runtime mode\n- default .js import specifiers + opt-in extensionless imports\n- Dynamic→any by default + opt-in Dynamic→unknown\n- TS metadata preferred (@:ts.type/@:ts.returnType) with Genes aliases\n","status":"open","priority":1,"issue_type":"epic","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:23.669289-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-22T20:24:30.743108-06:00"}
{"id":"genes-t6g.1","title":"M0: Compiler contract + repo layout + TS config baselines","description":"Lock the exact compiler contract before implementation.\n\nDeliverables:\n- Decide output directories (e.g. src-gen/ + dist/)\n- Define names for toggles (ts.no_extension, ts.dynamic_unknown, ts.minimal_runtime, etc.)\n- Recommend default tsconfig profile (NodeNext baseline) + bundler profile\n- Document how users invoke the target on Haxe 4.7 (likely still via -js \u003cout\u003e.ts)\n- Document packaging workflow (ts source + dist build)\n","acceptance_criteria":"- Written contract doc (or plan update) naming defaults\n- One example build.hxml + tsconfig.json drafted\n- Clear define/metadata surface listed","notes":"Delivered M0 contract + example configs: docs/typescript-target/COMPILER_CONTRACT.md and examples/typescript-target/{build.hxml,tsconfig.node-next.json,tsconfig.bundler.json}.","status":"closed","priority":1,"issue_type":"task","assignee":"Marcelo Serpa","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:23.822856-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-22T20:21:08.470544-06:00","closed_at":"2026-01-22T20:21:08.470544-06:00","close_reason":"Closed","dependencies":[{"issue_id":"genes-t6g.1","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:23.824185-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.10","title":"M9: Haxe 4.7 toolchain compatibility","description":"Move the repo/tooling from the current pinned Haxe version to Haxe 4.7 (stable) and ensure all genes-ts harnesses still pass.\\n\\nNotes:\\n- Today the repo is pinned to Haxe 4.3.7 via .haxerc\\n- We should decide the exact 4.7.x version string and update lix scope\\n","acceptance_criteria":"- .haxerc updated to Haxe 4.7.x\n- npm test passes\n- npm run test:genes-ts:full passes\n- npm run test:genes-ts:minimal passes\n","status":"open","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-23T03:22:48.113382-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:28:37.392705-06:00","dependencies":[{"issue_id":"genes-t6g.10","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-23T03:22:48.117679-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.11","title":"Release: genes-ts v1.0 cut","description":"Prepare a v1.0 release of genes-ts.\n\nScope:\n- Decide published library name and invocation contract (e.g. keep -lib genes + -D genes.ts vs rename)\n- Update readme.md + docs for end-users\n- Ensure example project is runnable and documented\n- Tag/release workflow (git tag + GitHub release)\n","acceptance_criteria":"- User-facing docs and example match the v1.0 contract\n- Release tag created and pushed\n","status":"open","priority":3,"issue_type":"chore","owner":"boss@fullofcaffeine.com","created_at":"2026-01-23T03:22:48.252829-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:23:07.636168-06:00","dependencies":[{"issue_id":"genes-t6g.11","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-23T03:22:48.253659-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.12","title":"React HXX: type-safe TSX-like authoring in Haxe","description":"Add a React authoring DSL using an HXX-style macro so users can write TSX-like markup in Haxe and compile it with genes-ts.\n\nDeliverables:\n- `genes.react.JSX.jsx` (macro) that parses JSX-ish markup and generates React element expressions\n- Output modes:\n  - Default: emit `.tsx` and print TSX markup for React element expressions\n  - Low-level: emit `.ts` and keep `React.createElement(...)` calls\n- JSX runtime:\n  - Default: TypeScript `jsx: \"react-jsx\"` (automatic runtime)\n  - Opt-in classic runtime support\n- Intrinsic elements are **always typed** (no Dynamic fallback), including `data-*` / `aria-*`\n- Optional inline markup support (rewrite `@:markup` -\u003e `JSX.jsx(...)`)\n- Tests that compile under strict genes-ts harness and run with `react-dom/server`\n\nReference pattern: reflaxe.elixir HXX + InlineMarkup.\n","acceptance_criteria":"-","status":"open","priority":3,"issue_type":"feature","owner":"boss@fullofcaffeine.com","created_at":"2026-01-23T03:36:17.957842-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T08:08:43.831162-06:00","dependencies":[{"issue_id":"genes-t6g.12","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-23T03:36:17.959765-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.2","title":"M1: TS emitter skeleton (modules + classes + tsc green)","description":"Create the minimal TS emitter that produces valid TS per module and type-checks.\n\nScope:\n- Emit ESM imports/exports\n- Emit export class declarations (not const-class expressions)\n- Handle minimal expression set for hello-world style examples\n- Wire up sourcemap scaffolding (Haxe→TS)\n\nOut of scope:\n- Full expression coverage\n- Enums/abstracts edge cases\n","acceptance_criteria":"- Generated TS passes tsc --noEmit for a small fixture\n- Node runtime sanity test passes after TS-\u003eJS compilation\n- Output is deterministic","status":"closed","priority":1,"issue_type":"task","assignee":"Marcelo Serpa","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:23.965139-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:26:04.643377-06:00","closed_at":"2026-01-23T03:26:04.643377-06:00","close_reason":"M1 complete: TS emitter skeleton wired behind -D genes.ts; strict tsc + runtime harness green (npm test, npm run test:genes-ts).","dependencies":[{"issue_id":"genes-t6g.2","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:23.966171-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.2","depends_on_id":"genes-t6g.1","type":"blocks","created_at":"2026-01-22T20:15:24.939261-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.3","title":"M2: Expression coverage parity (Genes ExprEmitter → TS)","description":"Port/adapt Genes expression emission to TS output while maintaining JS semantics.\n\nNotes:\n- Preserve cycle/extends strategy (Register.inherits)\n- Preserve closure binding strategy (Register.bind)\n- Ensure type-only vs value import separation does not introduce runtime cycles\n","acceptance_criteria":"- Existing Genes test corpus compiles (type-check)\n- Runtime tests pass for representative programs","status":"closed","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.094919-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T01:58:46.955227-06:00","closed_at":"2026-01-23T01:58:46.955227-06:00","close_reason":"TS full harness + JS baseline tests green","dependencies":[{"issue_id":"genes-t6g.3","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.097293-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.3","depends_on_id":"genes-t6g.2","type":"blocks","created_at":"2026-01-22T20:15:25.045427-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.4","title":"M3: Enums + pattern matching (runtime + TS union typing)","description":"Implement enum emission that preserves Haxe runtime semantics while producing ergonomic TS unions.\n\nInclude:\n- genes.enum_discriminator support\n- switch/case correctness\n","acceptance_criteria":"- Enum-heavy fixtures compile + run\n- TS types are discriminated unions (or equivalent)\n- Pattern matching behavior matches Haxe JS expectations","status":"closed","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.257029-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T02:48:03.029087-06:00","closed_at":"2026-01-23T02:48:03.029087-06:00","close_reason":"Enums emit TS discriminated unions (function container + namespace), strict TS harness + runtime tests green.","dependencies":[{"issue_id":"genes-t6g.4","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.258585-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.4","depends_on_id":"genes-t6g.3","type":"blocks","created_at":"2026-01-22T20:15:25.139395-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.5","title":"M4: Interfaces/typedefs/abstracts/generics","description":"Finish the type-surface for TS: interfaces, typedefs, generics, and abstract mapping strategy.\n\nInclude:\n- Interface type/value namespace merging as needed\n- Type-only import generation\n- Constraint mapping (T extends ...)\n","acceptance_criteria":"- Generic-heavy fixtures type-check\n- Interface runtime expectations met (when runtime mode enabled)\n- Type graph does not reference missing types","status":"closed","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.411324-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T02:50:19.190211-06:00","closed_at":"2026-01-23T02:50:19.190211-06:00","close_reason":"Interfaces/typedefs/generics/constraints all type-check in TS mode; strict TS full harness (tsc --strict + runtime) green.","dependencies":[{"issue_id":"genes-t6g.5","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.413936-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.5","depends_on_id":"genes-t6g.4","type":"blocks","created_at":"2026-01-22T20:15:25.231939-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.6","title":"M5: Externs + JS/TS interop (jsRequire/native/selfCall)","description":"Support extern-driven interop patterns and ensure import shapes are correct.\n\nInclude:\n- @:jsRequire default/named/namespace\n- @:native dotted paths\n- @:selfCall\n- extern __init__ policy\n","acceptance_criteria":"- Interop fixtures compile and run\n- Import shapes match expectations across profiles","status":"closed","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.539659-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T02:51:26.077046-06:00","closed_at":"2026-01-23T02:51:26.077046-06:00","close_reason":"Extern/jsRequire/native/selfCall interop passes in TS strict full harness + existing interop fixtures (TestRequire/TestExtendExtern/TestReactComponent).","dependencies":[{"issue_id":"genes-t6g.6","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.540691-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.6","depends_on_id":"genes-t6g.5","type":"blocks","created_at":"2026-01-22T20:15:25.322702-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.7","title":"M6: DCE/type-graph correctness + packaging","description":"Solve the runtime-vs-type reachability problem and finalize distribution workflow.\n\nInclude:\n- Dual graph (runtime + type) so TS signatures never reference missing exports\n- Build pipeline: src-gen/ TS + dist/ JS+d.ts\n- Minimal-runtime mode behavior and docs\n","acceptance_criteria":"- No missing-type references in TS output under -dce full\n- Packaging build produces usable dist/\n- Minimal-runtime profile documented and tested","status":"closed","priority":2,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.673689-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:17:56.470244-06:00","closed_at":"2026-01-23T03:17:56.470244-06:00","close_reason":"M6 complete: TS mode includes type-only deps under -dce full; added regression test. Added example build pipeline (tsc -\u003e dist) and fixed script to run from repo root. Implemented -D genes.ts.minimal_runtime (skips / registration) with docs + minimal harness. Gates: npm test, npm run test:genes-ts:full, npm run test:genes-ts:minimal, npm run build:example:genes-ts.","dependencies":[{"issue_id":"genes-t6g.7","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.674736-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.7","depends_on_id":"genes-t6g.6","type":"blocks","created_at":"2026-01-22T20:15:25.411177-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.8","title":"M7: Debuggability (Haxe→TS maps + optional TS→JS composition)","description":"Improve debugging experience.\n\nInclude:\n- Robust Haxe→TS sourcemaps\n- Document chained maps vs composition\n- If needed, implement map composition for Haxe→TS→JS\n","acceptance_criteria":"- Source maps usable in Node/browsers for representative examples\n- Documented debugging workflow","status":"in_progress","priority":3,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-22T20:15:24.813848-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:18:03.246847-06:00","dependencies":[{"issue_id":"genes-t6g.8","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-22T20:15:24.81639-06:00","created_by":"Marcelo Serpa"},{"issue_id":"genes-t6g.8","depends_on_id":"genes-t6g.7","type":"blocks","created_at":"2026-01-22T20:15:25.5047-06:00","created_by":"Marcelo Serpa"}]}
{"id":"genes-t6g.9","title":"M8: Snapshot tests for generated TS output","description":"Add snapshot/golden tests for the emitted TypeScript to catch formatting/structural regressions that runtime tests might miss.\\n\\nScope ideas:\\n- Pick a small suite of fixtures (tests_ts/, tests_ts_full/, and/or curated haxe code)\\n- Emit TS into a temp dir\\n- Normalize output (stable formatting + newline)\\n- Compare against committed snapshots (per-module .ts files)\\n- Provide an update mode (e.g. UPDATE_SNAPSHOTS=1)\\n","acceptance_criteria":"- Snapshot suite runs in CI and is deterministic\\n- Clear update workflow for regenerating snapshots\\n- Snapshot failures are readable diffs\\n","status":"open","priority":4,"issue_type":"task","owner":"boss@fullofcaffeine.com","created_at":"2026-01-23T03:22:36.361828-06:00","created_by":"Marcelo Serpa","updated_at":"2026-01-23T03:22:36.361828-06:00","dependencies":[{"issue_id":"genes-t6g.9","depends_on_id":"genes-t6g","type":"parent-child","created_at":"2026-01-23T03:22:36.365926-06:00","created_by":"Marcelo Serpa"}]}
